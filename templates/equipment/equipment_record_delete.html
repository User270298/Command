{% extends 'base.html' %}

{% block title %}Удаление записи | Учет Оборудования{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <div class="card">
            <div class="card-header bg-danger text-white">
                <h3 class="card-title mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i> Подтверждение удаления
                </h3>
            </div>
            <div class="card-body">
                <div class="alert alert-warning">
                    <h5><i class="fas fa-exclamation-triangle me-2"></i> Внимание!</h5>
                    <p class="mb-0">Вы собираетесь удалить запись об оборудовании. Это действие нельзя отменить.</p>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <h6 class="text-muted">Информация о записи</h6>
                        <p><strong>Организация:</strong> {{ organization.name }}</p>
                        <p><strong>Тип измерения:</strong> {{ record.measurement_type.name }}</p>
                        <p><strong>Наименование:</strong> {{ record.name }}</p>
                        <p><strong>Тип прибора:</strong> {{ record.device_type }}</p>
                        <p><strong>Номер:</strong> {{ record.serial_number|default:"-" }}</p>
                        <p><strong>Количество:</strong> {{ record.quantity }}</p>
                        <p><strong>Статус:</strong> 
                            <span class="badge {% if record.status == 'годен' %}bg-success{% else %}bg-danger{% endif %}">
                                {{ record.status }}
                            </span>
                        </p>
                        {% if record.tech_name %}
                            <p><strong>Техника:</strong> {{ record.tech_name }}</p>
                        {% endif %}
                        {% if record.notes %}
                            <p><strong>Примечание:</strong> {{ record.notes }}</p>
                        {% endif %}
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-muted">Метаданные</h6>
                        <p><strong>Создана:</strong> {{ record.date_created|date:"d.m.Y H:i" }}</p>
                        <p><strong>Автор:</strong> {{ record.user.get_full_name|default:record.user.username }}</p>
                        
                        <hr>
                        
                        <h6 class="text-muted">Права доступа</h6>
                        {% if is_senior %}
                            <p><span class="badge bg-warning text-dark">Старший группы</span> - можете удалять любые записи</p>
                        {% else %}
                            <p><span class="badge bg-info text-dark">Участник</span> - можете удалять только свои записи</p>
                        {% endif %}
                        {% if organization.is_closed %}
                            <p><span class="badge bg-secondary">Организация закрыта</span> - удаление недоступно</p>
                        {% endif %}
                    </div>
                </div>

                <form method="post">
                    {% csrf_token %}
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'organization_detail' organization.id %}" class="btn btn-outline-secondary me-md-2">
                            <i class="fas fa-times me-2"></i> Отмена
                        </a>
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash me-2"></i> Удалить запись
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %} 